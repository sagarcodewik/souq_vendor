/* ========== CoreUI Base Setup ========== */

@use "@coreui/coreui/scss/coreui" as * with (
  $enable-deprecation-messages: false
);
@use "@coreui/chartjs/scss/coreui-chartjs";

/* ========== Brand Color System ========== */

:root {
  /* Backgrounds */
  --brand-bg-light: #FEFAF7;
  --brand-bg-soft: #f3f4f7;
  --brand-bg-dark: #103033;

  /* Brand Colors */
  --brand-blue: #033160;
  --brand-green: #06796F;
  /* Brand Teal */
  --brand-teal: #0b737f; /* solid teal */
  --brand-teal-soft: rgba(19, 142, 156, 0.32); /* overlay / wash */

  /* Dark Variants */
  --brand-green-dark: #05665D;
  --brand-green-darker: #04534C;
  --brand-green-darkest: #033F39;

  /* Text */
  --brand-text-primary: #033160;
  --brand-text-muted: rgba(3, 49, 96, 0.75);

  /* Links */
  --brand-link: #06796F;
  --brand-link-hover: #089a8f;

  /* Whites / Overlays */
  --white-50: #ffffff50;
}

/* ========== Global Layout & CoreUI Mapping ========== */

body {
  background-color: var(--brand-bg-soft);

  --cui-primary: var(--brand-green);
  --cui-secondary: var(--brand-green);

  --cui-primary-text-emphasis: var(--brand-green);
  --cui-secondary-text-emphasis: var(--brand-green);

  --cui-link-color: var(--brand-link);
  --cui-link-hover-color: var(--brand-link-hover);

  --cui-heading-color: var(--brand-blue);
  --cui-body-color: var(--brand-text-muted);
  --cui-footer-color: var(--cui-body-color);

  color: var(--cui-body-color);
}

/* ========== Animations ========== */
@keyframes pulse {0% { opacity: 1;} 50% { opacity: 0.5;} 100% { opacity: 1;}}
@keyframes bounce {0%, 100% {transform: translateY(0);} 50% {transform: translateY(-6px);}}

/* ========== Wrapper ========== */
.wrapper {
  width: 100%;
  padding-inline: var(--cui-sidebar-occupy-start, 0)
                   var(--cui-sidebar-occupy-end, 0);
  will-change: auto;
  @include transition(padding 0.15s);
}

/* ========== Header & Footer ========== */
.app-header {
  backdrop-filter: blur(10px);
  .sidebar-toggler {
    margin-inline-start: -14px;
  }
  .notification-toggle {
    position: relative;
    border: none;
    background: transparent;
    transition: all 0.3s ease;

    &.animate-scale {
      transform: scale(1.1);
    }
  }
  .notification-icon {
    transition: all 0.3s ease;
    color: var(--cui-secondary-color);
    &.active {
      color: var(--cui-primary);
      animation: pulse 2s infinite;
    }
  }
  .notification-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    min-width: 20px;
    height: 20px;
    font-size: 0.65rem;

    display: flex;
    align-items: center;
    justify-content: center;

    animation: bounce 1s infinite;
  }
  .notification-menu {
    width: 420px;
    max-height: 500px;
    border-radius: 16px;
    backdrop-filter: blur(10px);
  }
  .notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  }
  .notification-list {
    max-height: 350px;
    overflow-y: auto;
  }
  .notification-item {
    padding: 0;
    &.unread {
      background: rgba(13, 110, 253, 0.05);
    }
  }
  .notification-content {
    display: flex;
    padding: 1rem;
  }
  .notification-icon-circle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(13, 110, 253, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;

    margin-right: 12px;
  }
  .notification-text {
    flex: 1;
  }
  .notification-title {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    font-weight: 600;
  }
}

.header > .container-fluid,
.sidebar-header {
  min-height: calc(4rem + 1px);
}

.header > .container-fluid + .container-fluid {
  min-height: 3rem;
}

.footer {
  min-height: calc(3rem + 1px);
}

/* ========== Sidebar ========== */
.sidebar {
  --cui-sidebar-bg: var(--brand-bg-dark);

  .sidebar-header {
    border-bottom: 1px solid var(--white-50);

    .sidebar-brand-full {
      margin-left: 3px;
    }
  }

  .sidebar-footer {
    border-top: 1px solid var(--white-50);
  }

  .sidebar-toggler {
    margin-inline-start: auto;
  }

  .sidebar-narrow,
  .sidebar-narrow-unfoldable:not(:hover) {
    .sidebar-toggler {
      margin-inline-end: auto;
    }
  }

  .sidebar-nav {
    .nav-link.active {
      color: #fff;
      background-color: var(--brand-teal);
    }

    .nav-link:hover {
      background-color: var(--brand-teal-soft);
    }
  }
}

/* ========== Buttons ========== */

.btn-primary {
  --cui-btn-bg: var(--brand-green);
  --cui-btn-border-color: var(--brand-green-dark);
  --cui-btn-hover-bg: var(--brand-green-darker);
  --cui-btn-hover-border-color: var(--brand-green-darkest);
}

.btn-outline-custom-green {
  color: var(--brand-green);
  border-color: var(--brand-green);

  &:hover {
    background-color: var(--brand-green);
    color: #fff;
  }
}

.btn-check:checked + .btn-outline-custom-green {
  background-color: var(--brand-green);
  color: #fff;
}

/* ========== Forms ========== */

.form-select:focus,
.form-control:focus {
  border-color: var(--brand-green);
  box-shadow: 0 0 0 0.2rem rgba(6, 121, 111, 0.25);
}

/* ========== Tables & Alerts ========== */

.table {
  --cui-table-bg: var(--brand-bg-dark);
  --cui-table-border-color: rgba(6, 121, 111, 0.4);
}

.table thead th {
  background-color: var(--brand-bg-dark);
  color: #ffffff;
}

.alert-primary {
  --cui-alert-bg: rgba(6, 121, 111, 0.18);
  --cui-alert-border-color: var(--brand-bg-dark);
}

/* ========== Utilities ========== */

.text-primary {
  color: var(--brand-blue) !important;
}

.bg-primary {
  background-color: var(--brand-green) !important;
}

a {
  color: var(--cui-link-color);
}

.breadcrumb-item.active {
  color: rgba(3, 49, 96, 0.6);
}

/* ========== SimpleBar (Scoped) ========== */

.sidebar .simplebar-content {
  display: flex;
  flex-direction: column;
  min-height: 100%;
}

/* ========== Examples / Docs ========== */

.example {
  &:not(:first-child) {
    margin-top: 1.5rem;
  }

  .tab-content {
    background-color: var(--brand-bg-soft);
  }
}

/* ========== Dark Mode ========== */

@include color-mode(dark) {
  body {
    --cui-body-bg: var(--brand-bg-dark);
    --cui-body-color: #ffffff;
    --cui-heading-color: #9fdad5;

    background-color: var(--cui-body-bg);
    color: var(--cui-body-color);
  }

  .bg-body-secondary {
    background-color: #1b4d50 !important;
  }

  .border {
    border-color: rgba(6, 121, 111, 0.4) !important;
  }

  .dropdown-header {
    color: #8fc9c3;
  }

  .table {
    --cui-table-bg: var(--brand-bg-dark);
  }

  .footer {
    --cui-footer-bg: var(--cui-body-bg);
  }
}